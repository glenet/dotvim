// NV Doc
[Doc pass]
Mobile-HTC@nvidia.com
rjkOzzSu

[Build Code]
// 查看自己的 define 有沒有進去
vim $OUT/obj/KERNEL/.config

// 查看 device 是 XA, XB, or ...
在 kernel log 裡面 search "phase"

// 單獨燒 kernel
kernel_build -j4;make_boot_image

// 將 hal 層的更動更新到 device 裡面
adb remount; 
adb push $OUT/system/lib/hw/gralloc.tegra.so system/lib/hw; 
adb reboot;

[GPIO]
// Dump gpio in kernel
// 如果要在 suspend 狀態下 dump gpio, 要把 mach-tegra/gpio.c 下 tegra_gpio_suspend(void) 裡面的 gpio_dump 註解拿掉
adb shell cat /d/htc_tegra_gpio

// Kernle gpio 設定大全(這些只是config, 真正要work要呼叫tegra_gpio_enable)
Config 			Sample Code
-------         ------------
O(L)			#include <linux/gpio.h>
				gpio_direction_output(unsigned gpio, 0);

O(H)			#include <linux/gpio.h>
				gpio_direction_output(unsigned gpio, 1);

I(PU)			#include <linux/gpio.h>
				gpio_direction_input(unsigned gpio);
				#include <mach/pinmux.h>
				int tegra_pinmux_set_pullupdown(enum tegra_pingroup pg, enum tegra_pullupdown pupd);
I(PD)

A				#include <mach/gpio.h>
				tegra_gpio_disable(int gpio);

NORMAL,		OUTPUT == output only
TRISTATE,	INPUT  == input only
NORMAL,		INPUT  == bi-direction
TRISTATE,	OUTPUT == disable input and output

// 如果gpio不如自己預期怎麼辦
1. grep一下, 是否被別人修改
2. 在 pinmux 設定之後, 緊接用 gpio_dump 看值對不對

[Log]
// Dump HtcSsdTestTool log
adb pull /data/htclog htc_log

// 清除 htclog
adb shell rm /data/htclog/＊

// 沒開 SsdTestTool, 看 device log 的方式
1. 把 system/core/rootdir/init.rc 裡面 dlog 的註解拿掉
2. adb pull /data/dlog/ dlog/

[Issue]
// ITS debug skill
1. 不要相信 QA 的 time stamp, 拿到 issue 馬上檢查 log 時間的正確性

// framework keyword
ANR fatal error fingerprint Watchdog "bout to"(surfaceflinger) die

// kernel keyword
DISP dc brightness late_resume early_suspend panic

log 裡面看到 tegra-grhost 代表某個 module hung 住

[Code]
1. Please alway add comment in code if it is workaround or issue
2. porting 的時候要確認每個部份都有正確的被編譯，那就是在你預期要 run 到的地方都加一些 print 確保他真的 run 到了！
3. break down 問題的能力，把 feature切分成小task，實踐due day的觀念

